!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).ResizeEmitter=t()}(this,(function(){"use strict";var e,t=requestAnimationFrame||mozRequestAnimationFrame||webkitRequestAnimationFrame||function(e){return setTimeout(e,1e3/60)},n=cancelAnimationFrame||mozCancelAnimationFrame||webkitCancelAnimationFrame||clearTimeout,i="function"==typeof Event?function(e,t){e.dispatchEvent(new Event(t))}:function(e,t){var n=document.createEvent("Event");n.initEvent(t,!1,!1),e.dispatchEvent(n)},r="function"==typeof document.addEventListener?function(e,t,n,i){e.addEventListener(t,n,i)}:function(e,t,n,i){e.attachEvent("on"+t,n)},o="function"==typeof(e="function"==typeof Event?new Event("resize"):document.createEvent("Event")).stopImmediatePropagation?function(e){e.stopImmediatePropagation()}:"function"==typeof e.stopPropagation()?function(e){e.stopPropagation()}:function(e){};function s(e){return{width:e.offsetWidth,height:e.offsetHeight}}function a(e){var t=s(e.target);return(t.width!==e.prevSize.width||t.height!==e.prevSize.height)&&(e.prevSize=t,!0)}function c(e){if(!(e instanceof Node))throw new Error("element must extend Node class")}function f(e){for(var r=0;r<e.length;r++)if(e[r].borderBoxSize||e[r].contentRect){var o=e[r].target.__resizeSensor__;o.requestID&&n(o.requestID),o.requestID=t((function(){a(o)&&i(o.target,"resize")}));break}}var l,u=function(e){if(!e.__resizeSensor__){var t=new ResizeObserver(f);t.observe(e),e.__resizeSensor__={target:e,observer:t,prevSize:s(e),requestID:0}}},d=function(e){e.__resizeSensor__&&(e.__resizeSensor__.observer.disconnect(),delete e.__resizeSensor__)},_=!1;function m(e){o(e);var r=e.currentTarget.parentNode.__resizeSensor__;return p(r.element),r.requestID&&n(r.requestID),r.requestID=t((function(){a(r)&&i(r.target,"resize")})),!1}function v(e){o(e);var t=e.currentTarget.parentNode.__resizeSensor__;return"__ResizeSensorKF__"===e.animationName&&p(t.element),!1}function p(e){var t=e.firstElementChild,n=e.lastElementChild,i=t.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,i.style.width=t.offsetWidth+1+"px",i.style.height=t.offsetHeight+1+"px",t.scrollLeft=t.scrollWidth,t.scrollTop=t.scrollHeight}var h=function(e){if(!e.__resizeSensor__){!function(){if(!_){var e="",t=document.createElement("fakeElement");if(void 0===t.style.animationName)for(var n=["webkit","moz","o","ms"],i=["webkitAnimationStart","animationstart","oAnimationStart","MSAnimationStart"],r=0;r<n.length;r++)void 0!==t.style[n[r]+"AnimationName"]&&(e="-"+n[r]+"-",animationstartevent=i[r]);l=e+"animation:1ms __ResizeSensorKF__;";var o="@"+e+"keyframes __ResizeSensorKF__{from{opacity:0}to{opacity:0}}",s=document.createElement("style");s.type="text/css",s.styleSheet?s.styleSheet.cssText=o:s.appendChild(document.createTextNode(o)),document.head.appendChild(s),_=!0}}(),"static"===getComputedStyle(e).position&&(e.style.position="relative");var t=function(){var e="position:absolute;left:0;top:0;right:0;bottom:0;z-index:-1;overflow:hidden;visibility:hidden;opacity:0;pointer-events:none;",t="position:absolute;left:0;top:0;",n=document.createElement("div");n.classList.add("__ResizeSensor__"),n.dir="ltr",n.style.cssText=e+l;var i=document.createElement("div");i.style.cssText=e,n.appendChild(i);var r=document.createElement("div");r.style.cssText=t,i.appendChild(r);var o=document.createElement("div");o.style.cssText=e,n.appendChild(o);var s=document.createElement("div");return s.style.cssText=t+"width:200%;height:200%;",o.appendChild(s),n}();e.appendChild(t),p(t),e.__resizeSensor__={target:e,element:t,prevSize:s(e),requestID:0},r(t,"scroll",m,!0),r(t,"animationstart",v,!0)}},z=function(e){e.__resizeSensor__&&(e.removeChild(e.__resizeSensor__.element),delete e.__resizeSensor__)},g=[],S=0,y=!1;function E(){for(var e=0;e<g.length;e++)a(g[e].__resizeSensor__)&&i(g[e],"resize");S=t(E)}var T=function(e){e.__resizeSensor__||(e.__resizeSensor__={target:e,prevSize:s(e),requestID:0},g.push(e),y||(S=t(E),y=!0))},b=function(e){e.__resizeSensor__&&(g.splice(g.indexOf(e),1),delete e.__resizeSensor__,0===g.length&&y&&(n(S),y=!1))};function A(e){return"TABLE"===e||"THEAD"===e||"TBODY"===e||"TR"===e||"IMG"===e||"INPUT"===e||"TEXTAREA"===e||"CANVAS"===e||"PICTURE"===e||"AUDIO"===e||"VIDEO"===e}return"function"==typeof ResizeObserver?{add:function(e){function t(e){c(e),u(e)}if("number"==typeof e.length)for(var n=0;n<e.length;n++)t(e[n]);else t(e)},remove:function(e){function t(e){c(e),d(e)}if("number"==typeof e.length)for(var n=0;n<e.length;n++)t(e[n]);else t(e)}}:{add:function(e){function t(e){c(e),A(e.tagName)?T(e):h(e)}if("number"==typeof e.length)for(var n=0;n<e.length;n++)t(e[n]);else t(e)},remove:function(e){function t(e){c(e),A(e.tagName)?b(e):z(e)}if("number"==typeof e.length)for(var n=0;n<e.length;n++)t(e[n]);else t(e)}}}));
