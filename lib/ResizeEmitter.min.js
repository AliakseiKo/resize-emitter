!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).ResizeEmitter=t()}(this,(function(){"use strict";var e,t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},n=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,i=function(){try{new Event("resize");return function(e){return new Event(e)}}catch(e){return function(e){var t=document.createEvent("Event");return t.initEvent(e,!1,!1),t}}}(),r=function(e,t){e.dispatchEvent(i(t))},o="function"==typeof document.addEventListener?function(e,t,n,i){e.addEventListener(t,n,i)}:function(e,t,n,i){e.attachEvent("on"+t,n)},s="function"==typeof(e=i("resize")).stopImmediatePropagation?function(e){e.stopImmediatePropagation()}:"function"==typeof e.stopPropagation()?function(e){e.stopPropagation()}:function(e){};function a(e){return{width:e.offsetWidth,height:e.offsetHeight}}function _(e){var t=a(e.target);return(t.width!==e.prevSize.width||t.height!==e.prevSize.height)&&(e.prevSize=t,!0)}function d(e){if(!(e instanceof Node))throw new Error("element must extend Node class")}function c(e){for(var i=0;i<e.length;i++)if(e[i].borderBoxSize||e[i].contentRect){var o=e[i].target.__resizeSensor__;o.requestID&&n(o.requestID),o.requestID=t((function(){_(o)&&r(o.target,"resize")}));break}}var l=function(e){if(!e.__resizeSensor__){var t=new ResizeObserver(c);t.observe(e),e.__resizeSensor__={target:e,observer:t,prevSize:a(e),requestID:0}}},f=function(e){e.__resizeSensor__&&(e.__resizeSensor__.observer.disconnect(),delete e.__resizeSensor__)},u="animationstart",m=!1;function h(e){s(e);var i=e.currentTarget.parentNode.__resizeSensor__;return v(i.element),i.requestID&&n(i.requestID),i.requestID=t((function(){_(i)&&r(i.target,"resize")})),!1}function p(e){s(e);var t=e.currentTarget.parentNode.__resizeSensor__;return"__ResizeSensorKF__"===e.animationName&&v(t.element),!1}function v(e){var t=e.firstElementChild,n=e.lastElementChild,i=t.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,i.style.width=t.offsetWidth+1+"px",i.style.height=t.offsetHeight+1+"px",t.scrollLeft=t.scrollWidth,t.scrollTop=t.scrollHeight}var z=function(e){if(!e.__resizeSensor__){!function(){if(!m){var e="",t=document.createElement("fakeElement");if(void 0===t.style.animationName)for(var n=["Webkit","Moz","O","ms"],i=["webkitAnimationStart","animationstart","oAnimationStart","MSAnimationStart"],r=0;r<n.length;r++)void 0!==t.style[n[r]+"AnimationName"]&&(e="-"+n[r].toLowerCase()+"-",u=i[r]);var o="position:absolute;left:0;top:0;",s="@"+e+"keyframes __ResizeSensorKF__{from{opacity:0}to{opacity:0}}.__ResizeSensor__{"+e+"animation:1ms __ResizeSensorKF__;}.__ResizeSensor__,.__ResizeExpand__,.__ResizeShrink__{position:absolute;left:0;top:0;right:0;bottom:0;z-index:-1;overflow:hidden;visibility:hidden;opacity:0;pointer-events:none;}.__ResizeExpandChild__,.__ResizeShrinkChild__{"+o+"}.__ResizeShrinkChild__{width:200%;height:200%;}",a=document.createElement("style");a.type="text/css",a.styleSheet?a.styleSheet.cssText=s:a.appendChild(document.createTextNode(s)),document.head.appendChild(a),m=!0}}(),"static"===getComputedStyle(e).position&&(e.style.position="relative");var t=function(){var e=document.createElement("div");e.classList.add("__ResizeSensor__"),e.dir="ltr";var t=document.createElement("div");t.classList.add("__ResizeExpand__"),e.appendChild(t);var n=document.createElement("div");n.classList.add("__ResizeExpandChild__"),t.appendChild(n);var i=document.createElement("div");i.classList.add("__ResizeShrink__"),e.appendChild(i);var r=document.createElement("div");return r.classList.add("__ResizeShrinkChild__"),i.appendChild(r),e}();e.appendChild(t),v(t),e.__resizeSensor__={target:e,element:t,prevSize:a(e),requestID:0},o(t,"scroll",h,!0),o(t,u,p,!0)}},S=function(e){e.__resizeSensor__&&(e.removeChild(e.__resizeSensor__.element),delete e.__resizeSensor__)},g=[],E=0,w=!1;function y(){for(var e=0;e<g.length;e++)_(g[e].__resizeSensor__)&&r(g[e],"resize");E=t(y)}var R=function(e){e.__resizeSensor__||(e.__resizeSensor__={target:e,prevSize:a(e),requestID:0},g.push(e),w||(E=t(y),w=!0))},C=function(e){e.__resizeSensor__&&(g.splice(g.indexOf(e),1),delete e.__resizeSensor__,0===g.length&&w&&(n(E),w=!1))};function b(e){return"TABLE"===e||"THEAD"===e||"TBODY"===e||"TR"===e||"IMG"===e||"INPUT"===e||"TEXTAREA"===e||"CANVAS"===e||"PICTURE"===e||"AUDIO"===e||"VIDEO"===e}return"function"==typeof ResizeObserver?{add:function(e){function t(e){d(e),l(e)}if("number"==typeof e.length)for(var n=0;n<e.length;n++)t(e[n]);else t(e)},remove:function(e){function t(e){d(e),f(e)}if("number"==typeof e.length)for(var n=0;n<e.length;n++)t(e[n]);else t(e)}}:{add:function(e){function t(e){d(e),b(e.tagName)?R(e):z(e)}if("number"==typeof e.length)for(var n=0;n<e.length;n++)t(e[n]);else t(e)},remove:function(e){function t(e){d(e),b(e.tagName)?C(e):S(e)}if("number"==typeof e.length)for(var n=0;n<e.length;n++)t(e[n]);else t(e)}}}));
